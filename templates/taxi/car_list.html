{% extends "base.html" %}

{% block content %}
  <h1>
    Car list
    <a href="{% url 'taxi:car-create' %}" class="btn btn-primary link-to-page">
      Create
    </a>
  </h1>
  <form id="search-form" method="get">
    <label for="search"></label>
    <input type="text" name="query-cars" id="search" placeholder="Search cars...">
  </form>
  <div id="car-list-container">
    {% if car_list %}
      <ul>
        {% for car in car_list %}
          <li>
            <a href="{% url "taxi:car-detail" pk=car.id %} ">{{ car.id }}</a>
            {{ car.model }} ({{ car.manufacturer.name }})
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>There are no cars in taxi</p>
    {% endif %}
  </div>

<script>
  $(document).ready(function() {
    // Real-time search functionality using jQuery
    $('#search').on('input', function() {
      var query_cars = $(this).val();
      $.ajax({
        url: $('#search-form').attr('action'),
        data: {
          'query-cars': query_cars
        },
        success: function(data) {
          $('#car-list-container').html($(data).find('#car-list-container').html());
        }
      });
    });
  });
</script>

{% endblock %}
